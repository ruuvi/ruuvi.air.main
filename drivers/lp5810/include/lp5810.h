/**
 * @copyright (c) 2025 Ruuvi Innovations Ltd
 *
 * SPDX-License-Identifier: BSD-3-Clause
 */

#ifndef ZEPHYR_INCLUDE_DRIVERS_LED_LP5810_H_
#define ZEPHYR_INCLUDE_DRIVERS_LED_LP5810_H_

#define LP5810_COLORS_PER_LED 1

#define LP5810_MAX_LEDS 4

#define LP5810_MAX_BRIGHTNESS 100U

#define LP5810_LSD_THRESHOLD_035_VOUT (0x00)
#define LP5810_LSD_THRESHOLD_045_VOUT (0x01)
#define LP5810_LSD_THRESHOLD_055_VOUT (0x02)
#define LP5810_LSD_THRESHOLD_065_VOUT (0x03)

#define LP5810_REG_CMD_UPDATE       (0x10)
#define LP5810_REG_CMD_UPDATE_VAL   (0x55)
#define LP5810_REG_CMD_START        (0x11)
#define LP5810_REG_CMD_START_VAL    (0xFF)
#define LP5810_REG_CMD_STOP         (0x12)
#define LP5810_REG_CMD_STOP_VAL     (0xAA)
#define LP5810_REG_CMD_PAUSE        (0x13)
#define LP5810_REG_CMD_PAUSE_VAL    (0x33)
#define LP5810_REG_CMD_CONTINUE     (0x13)
#define LP5810_REG_CMD_CONTINUE_VAL (0xCC)

#define LP5810_REG_RESET     (0x23)
#define LP5810_REG_RESET_CMD (0x66)

#define LP5810_REG_CHIP_EN      (0x00)
#define LP5810_REG_CHIP_EN_MASK (0x01)
#define LP5810_REG_CHIP_EN_VAL  (0x01)

#define LP5810_REG_TSD_CONFIG_STATUS (0x300)

#define LP5810_REG_DEV_CONFIG_0                      (0x01)
#define LP5810_REG_DEV_CONFIG_0_VAL_MAX_CURRENT_25MA (0x00)
#define LP5810_REG_DEV_CONFIG_0_VAL_MAX_CURRENT_51MA (0x01)

#define LP5810_REG_DEV_CONFIG_3               (0x04)
#define LP5810_REG_DEV_CONFIG_3_VAL_AUTO_EN_0 (0x01)
#define LP5810_REG_DEV_CONFIG_3_VAL_AUTO_EN_1 (0x02)
#define LP5810_REG_DEV_CONFIG_3_VAL_AUTO_EN_2 (0x04)
#define LP5810_REG_DEV_CONFIG_3_VAL_AUTO_EN_3 (0x08)

#define LP5810_REG_DEV_CONFIG_5                  (0x05)
#define LP5810_REG_DEV_CONFIG_5_VAL_EXP_EN_LED_0 (0x01)
#define LP5810_REG_DEV_CONFIG_5_VAL_EXP_EN_LED_1 (0x02)
#define LP5810_REG_DEV_CONFIG_5_VAL_EXP_EN_LED_2 (0x04)
#define LP5810_REG_DEV_CONFIG_5_VAL_EXP_EN_LED_3 (0x08)

#define LP5810_REG_DEV_CONFIG_12                                 (0x0D)
#define LP5810_REG_DEV_CONFIG_12_VAL_LOD_ACTION_CUR_OUT_SHUTDOWN (0x08)
#define LP5810_REG_DEV_CONFIG_12_VAL_LSD_ACTION_ALL_OUT_SHUTDOWN (0x04)
#define LP5810_REG_DEV_CONFIG_12_VAL_LSD_THRESHOLD_MASK          (0x03)
#define LP5810_REG_DEV_CONFIG_12_VAL_LSD_THRESHOLD_035_VOUT      (LP5810_LSD_THRESHOLD_035_VOUT)
#define LP5810_REG_DEV_CONFIG_12_VAL_LSD_THRESHOLD_045_VOUT      (LP5810_LSD_THRESHOLD_045_VOUT)
#define LP5810_REG_DEV_CONFIG_12_VAL_LSD_THRESHOLD_055_VOUT      (LP5810_LSD_THRESHOLD_055_VOUT)
#define LP5810_REG_DEV_CONFIG_12_VAL_LSD_THRESHOLD_065_VOUT      (LP5810_LSD_THRESHOLD_065_VOUT)

#define LP5810_REG_LED_EN_1              (0x20)
#define LP5810_REG_LED_EN_1_VAL_LED_EN_0 (0x01)
#define LP5810_REG_LED_EN_1_VAL_LED_EN_1 (0x02)
#define LP5810_REG_LED_EN_1_VAL_LED_EN_2 (0x04)
#define LP5810_REG_LED_EN_1_VAL_LED_EN_3 (0x08)

#define LP5810_REG_FAULT_CLEAR     (0x22)
#define LP5810_REG_FAULT_CLEAR_LOD (0x01)
#define LP5810_REG_FAULT_CLEAR_LSD (0x02)
#define LP5810_REG_FAULT_CLEAR_TSD (0x04)

#define LP5810_REG_MANUAL_DC(channel)  (0x30 + (channel))
#define LP5810_REG_MANUAL_PWM(channel) (0x40 + (channel))

#define LP5810_REG_AUTO_DC(channel)             (0x50 + (channel))
#define LP5810_REG_AUTO_ANIMATION_BASE(channel) (0x80 + ((channel) * 0x1A))

#define LP5810_REG_TSD_CONFIG_STATUS            (0x300)
#define LP5810_REG_TSD_CONFIG_STATUS_MASK       (0x03)
#define LP5810_REG_TSD_CONFIG_STATUS_CONFIG_ERR (0x01)
#define LP5810_REG_TSD_CONFIG_STATUS_TSD_STATUS (0x02)

#define LP5810_REG_LOD_STATUS_0    (0x301)
#define LP5810_REG_LOD_STATUS_MASK (0x0F)

#define LP5810_REG_LSD_STATUS_0    (0x303)
#define LP5810_REG_LSD_STATUS_MASK (0x0F)

#endif /* ZEPHYR_INCLUDE_DRIVERS_LED_LP5810_H_ */
