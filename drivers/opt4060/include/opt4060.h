/**
 * @copyright Ruuvi Innovations Ltd, license BSD-3-Clause.
 */

#ifndef ZEPHYR_DRIVERS_SENSOR_OPT4060_H_
#define ZEPHYR_DRIVERS_SENSOR_OPT4060_H_

#include <stdint.h>
#include <zephyr/kernel.h>

#define OPT4060_CHAN_CNT_MASK (0xFU)

#define OPT4060_REG_CONFIG_SHIFT_CONV_TIME       (6)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_600_US  (0 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_1_MS    (1 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_1_8_MS  (2 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_3_4_MS  (3 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_6_5_MS  (4 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_12_7_MS (5 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_25_MS   (6 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_50_MS   (7 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_100_MS  (8 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_200_MS  (9 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_400_MS  (10 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_800_MS  (11 << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)
#define OPT4060_REG_CONFIG_VAL_CONV_TIME_MASK    (0xF << OPT4060_REG_CONFIG_SHIFT_CONV_TIME)

enum opt4060_channel {
	OPT4060_CHANNEL_RED = 0,
	OPT4060_CHANNEL_GREEN = 1,
	OPT4060_CHANNEL_BLUE = 2,
	OPT4060_CHANNEL_LUMINOSITY = 3,
	OPT4060_CHANNEL_NUM,
};

uint32_t opt4060_get_conv_time_us(void);

int32_t opt4060_get_one_measurement_duration_ticks(const struct device *const p_dev);

int opt4060_configure_conv_time(const struct device *const p_dev, const uint16_t conv_time);

#endif /* ZEPHYR_DRIVERS_SENSOR_OPT4060_H_ */
